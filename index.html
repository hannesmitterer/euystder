<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZeppBamboo: Bauphasen im Sudan</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="zpabamboo0.png">
    <!-- Local fonts fallback -->
    <style>
        /* Fallback fonts for offline use */
        @font-face {
            font-family: 'Inter-fallback';
            src: local('Arial'), local('Helvetica Neue'), local('Helvetica'), local('sans-serif');
            font-display: swap;
        }
        @font-face {
            font-family: 'Playfair-fallback';
            src: local('Georgia'), local('Times New Roman'), local('serif');
            font-display: swap;
        }
        
        /* Use fallback fonts if Google Fonts are blocked */
        body {
            font-family: 'Inter', 'Inter-fallback', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', 'Playfair-fallback', Georgia, serif;
        }
    </style>
    <style>
        /* Additional specific styles for ZeppBamboo project */
        .hero-bg {
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)),
                url('zeppbamboo_vision.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        .phase-number {
            position: absolute;
            top: -10px;
            right: -10px;
            background: linear-gradient(135deg, var(--primary-500), var(--bamboo-500));
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: var(--shadow-lg);
            z-index: 10;
        }
        
        .gallery-preview {
            background-image: url('gallery.png');
            background-size: cover;
            background-position: center;
            min-height: 300px;
            border-radius: var(--radius-2xl);
            margin: var(--space-8) 0;
            position: relative;
            overflow: hidden;
        }
        
        .gallery-preview::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
        }
        
        .gallery-content {
            position: relative;
            z-index: 1;
            color: white;
            padding: var(--space-8);
            text-align: center;
        }
        
        .project-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin: var(--space-8) 0;
        }
        
        .stat-card {
            background: white;
            padding: var(--space-6);
            border-radius: var(--radius-xl);
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-100);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-600), var(--bamboo-600));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stat-label {
            color: var(--gray-600);
            font-weight: 500;
            margin-top: var(--space-2);
        }
        
        /* Icon system using Unicode */
        .icon {
            display: inline-block;
            font-style: normal;
            font-size: 1.2em;
            margin-right: var(--space-2);
        }
        
        .icon-phase::before { content: "üèóÔ∏è"; }
        .icon-water::before { content: "üíß"; }
        .icon-energy::before { content: "‚ö°"; }
        .icon-bamboo::before { content: "üéã"; }
        .icon-zepp::before { content: "üéà"; }
        .icon-community::before { content: "üë•"; }
        .icon-eco::before { content: "üå±"; }
        .icon-governance::before { content: "üèõÔ∏è"; }
        .icon-network::before { content: "üåê"; }
        .icon-future::before { content: "üöÄ"; }
        
        /* Phase-specific styling */
        .phase-1 { border-left: 4px solid var(--earth-500); }
        .phase-2 { border-left: 4px solid var(--primary-500); }
        .phase-3 { border-left: 4px solid var(--bamboo-500); }
        .phase-4 { border-left: 4px solid var(--earth-400); }
        .phase-5 { border-left: 4px solid var(--primary-600); }
        .phase-6 { border-left: 4px solid var(--bamboo-600); }
        .phase-7 { border-left: 4px solid var(--primary-400); }
        .phase-8 { border-left: 4px solid var(--earth-600); }
        .phase-9 { border-left: 4px solid var(--primary-700); }
        .phase-10 { border-left: 4px solid var(--bamboo-700); }
    </style>
    <!-- Firebase SDKs laden -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        setLogLevel('debug');
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Sign in anonymously or with custom token
        if (initialAuthToken) {
            signInWithCustomToken(auth, initialAuthToken).catch((error) => {
                console.error("Firebase Auth Error:", error);
                signInAnonymously(auth);
            });
        } else {
            signInAnonymously(auth);
        }

        // Wait for auth to be ready
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                const userId = user.uid;
                document.getElementById('user-id').textContent = userId;
                document.getElementById('loading').style.display = 'none';

                const docRef = doc(db, `artifacts/${appId}/public/data/zeppBamboo`);

                // Listen for real-time updates
                onSnapshot(docRef, (doc) => {
                    if (doc.exists()) {
                        const data = doc.data();
                        renderPhases(data.phases || []);
                    } else {
                        // Document doesn't exist, maybe create it with initial data
                        const initialPhases = [
                            {
                                id: 1,
                                title: "Phase 1: Fundament und Auftrieb",
                                img: "zpabamboo1.png",
                                alt: "Phase 1 - Fundamentbau mit Bambus und Plastikkanistern",
                                text: "Ein Team von Bauenden errichtet die grundlegende Bambusgitterstruktur auf festem Boden nahe eines Gew√§ssers. Recycelte Plastikkanister und F√§sser, die vor Ort gesammelt wurden, werden sorgf√§ltig in die Bambusrahmen eingearbeitet und verschn√ºrt, um die Auftriebsk√∂rper zu bilden. Traditionelle Seil- und Bambusverbindungstechniken sind sichtbar, die von erfahrenen Handwerkern angewendet werden, w√§hrend die Gemeinschaft hilft, die Materialien zu sammeln und vorzubereiten."
                            },
                            {
                                id: 2,
                                title: "Phase 2: Struktur und Plattformmontage",
                                img: "zpabamboo2.png",
                                alt: "Phase 2 - Montage der Grundstruktur auf dem Wasser",
                                text: "Die schwimmende Plattform ist nun im Wasser positioniert und wird stabilisiert. Arbeiter beginnen damit, die vertikalen Bambusst√ºtzen und den Rahmen f√ºr die erste Ebene der Geb√§ude zu errichten. Die Plattform ist mit einer Verankerung gesichert, w√§hrend andere Elemente wie Lehmziegel und Schilfrohrmatten f√ºr W√§nde und D√§cher vorbereitet werden. Es herrscht reger Betrieb, w√§hrend die Gemeinschaft zusammenarbeitet, um die Struktur weiter aufzubauen."
                            },
                            {
                                id: 3,
                                title: "Phase 3: Dachkonstruktion und integrierte Systeme",
                                img: "zpabamboo3.png",
                                alt: "Phase 3 - Bau des Daches und Aquaponik-Systeme",
                                text: "Die Bambusrahmen f√ºr die Geb√§ude sind weitgehend fertiggestellt. Arbeiter sind dabei, D√§cher aus Schilf und getrocknetem Lehm zu montieren, die sowohl Schutz als auch nat√ºrliche Isolierung bieten. Eine wichtige Neuerung sind die integrierten Aquaponik-Systeme: Auf einer der Plattformen sind erste Pflanzbeete sichtbar, die in Verbindung mit einem Fischzuchtbecken stehen, um eine nachhaltige Nahrungsmittelproduktion zu erm√∂glichen. Weiterhin sind Vorbereitungen f√ºr einfache Regenwassersammelsysteme zu erkennen, die Wasser von den D√§chern in Beh√§lter leiten sollen."
                            },
                            {
                                id: 4,
                                title: "Phase 4: Energie- und Wasserautonomie",
                                img: "zpabamboo4.png",
                                alt: "Phase 4 - Solaranlage und Wassersammlung",
                                text: "Die Grundstruktur der ersten H√ºtte ist weitgehend abgeschlossen, und die 'ZeppBamboo'-Siedlung macht einen gro√üen Schritt in Richtung Autarkie. Auf dem Dach der H√ºtte ist eine kleine Photovoltaikanlage sichtbar, die erste Solarenergie f√ºr die Bewohner erzeugen wird. Direkt daneben befindet sich ein einfaches Regenwassersammelsystem, das Wasser in einen gro√üen, auf der Plattform montierten Tank leitet. Ein niedrigtechnologisches Filtersystem, m√∂glicherweise aus Schichten von Sand und Kies, ist neben dem Tank angebracht, um das gesammelte Wasser zu reinigen. Die Aquaponik-Beete gedeihen bereits, und die Gemeinschaft arbeitet weiterhin Hand in Hand."
                            },
                            {
                                id: 5,
                                title: "Phase 5: Fertigstellung und Dockm√∂glichkeiten",
                                img: "zpabamboo5.png",
                                alt: "Phase 5 - Dock und Pflanzen",
                                text: "Die erste ZeppBamboo-Einheit ist fast vollst√§ndig bewohnt, mit befestigten W√§nden und weiteren Innenausbauten. Eine einfache, aber robuste Docking-M√∂glichkeit aus Bambus und recyceltem Holz ist an die schwimmende Plattform angef√ºgt. Sie erm√∂glicht kleinen Booten das sichere Anlegen und dient als Einstiegspunkt zur Struktur. Weitere gr√ºne Elemente wie Pflanzen und kleine B√§ume sind auf der Plattform angepflanzt, was die Lebensqualit√§t erh√∂ht und Schatten spendet. Die Photovoltaik-Anlage und das Wassersystem sind voll funktionsf√§hig, und die Aquaponik-Beete tragen erste Ernten."
                            },
                            {
                                id: 6,
                                title: "Phase 6: Bioversharmony und Gemeinschaftsleben",
                                img: "zpabamboo6.png",
                                alt: "Phase 6 - Bioversharmony und Gemeinschaftsleben",
                                text: "Die ZeppBamboo-Einheit ist nun vollst√§ndig bewohnt und bildet einen bl√ºhenden Mikrokosmos. Mehrere modulare Einheiten wurden miteinander verbunden und bilden eine kleine schwimmende Gemeinschaft. Die Oberfl√§chen sind mit einer F√ºlle von einheimischen Pflanzen und Gem√ºseg√§rten bedeckt, die nicht nur Nahrung liefern, sondern auch die Biodiversit√§t anziehen. Im Wasser unter und um die Plattform herum sind einfache Netze oder Strukturen angebracht, die als Laichgebiete und Schutzr√§ume f√ºr Fische dienen, wodurch ein florierendes √ñkosystem gef√∂rdert wird. Kinder spielen sicher auf den Plattformen, und kleine Boote bewegen sich friedlich zwischen den Einheiten."
                            },
                            {
                                id: 7,
                                title: "Phase 7: Zepp-Integration und Mobilit√§t",
                                img: "zpabamboo7.png",
                                alt: "Phase 7 - Zepp-Integration und Mobilit√§t",
                                text: "Die namensgebenden Zeppeline werden in das Projekt integriert. Kleinere, mit Biogas betriebene Bambus-Zepp-Module dienen zur Mobilit√§t und Erkundung. Ein Start- und Landeplatz aus Bambus wird gebaut, um die schwebenden Zepp-Module aufzunehmen. Diese Zeppeline erm√∂glichen es den Mitgliedern der ZeppBamboo-Siedlung, die umliegenden Gebiete zu erkunden, Ressourcen zu transportieren und andere Gemeinschaften zu erreichen, ohne die Wasserwege zu verlassen."
                            },
                            {
                                id: 8,
                                title: "Phase 8: Echodemokratie und Governance",
                                img: "zpabamboo8.png",
                                alt: "Phase 8 - Echodemokratie und Governance",
                                text: "Die ZeppBamboo-Gemeinschaft etabliert formelle echodemokratische Strukturen f√ºr die kollektive Entscheidungsfindung. Die schwimmenden Inseln werden so umgestaltet, dass sie einen zentralen Versammlungsplatz f√ºr demokratische Sitzungen beherbergen. Entscheidungen √ºber Ressourcenmanagement, die Nutzung erneuerbarer Energien und die Expansion der Siedlung werden gemeinsam getroffen. Die ZeppBamboo-Siedlung wird zu einem Modell f√ºr eine nachhaltige und selbstverwaltete Gemeinschaft, die auf den Prinzipien der √∂kologischen und sozialen Harmonie beruht."
                            },
                            {
                                id: 9,
                                title: "Phase 9: Regionaler Hub und Advanced Circularity",
                                img: "zpabamboo0.png",
                                alt: "Phase 9 - Regionaler Hub und Advanced Circularity",
                                text: "Die ZeppBamboo-Siedlung hat sich zu einem vitalen regionalen Hub auf dem Wasser entwickelt. Mehrere gro√üe, miteinander verbundene schwimmende Inseln bilden ein gesch√§ftiges Netzwerk von H√§usern, Gemeinschaftseinrichtungen und spezialisierten Produktionszonen. Fortgeschrittene Prinzipien der Kreislaufwirtschaft sind vollst√§ndig integriert: Neben Aquaponik und Regenwassernutzung sind spezialisierte Einheiten f√ºr Abfalltrennung, Materialrecycling und organische Kompostierung sichtbar. Gr√∂√üere Zeppeline, die Fracht oder gr√∂√üere Personengruppen transportieren, verbinden dieses zentrale Drehkreuz mit kleineren ZeppBamboo-Au√üenposten oder Festlandgemeinschaften, was den Handel, die Bildung und den Ressourcenaustausch erleichtert."
                            },
                            {
                                id: 10,
                                title: "Phase 10: Globale Verbreitung und Wissensaustausch",
                                img: "zpabamboo00.png",
                                alt: "Phase 10 - Globale Verbreitung und Wissensaustausch",
                                text: "ZeppBamboo ist nun eine globale Bewegung, die ihr Wissen und ihre Technologie mit Gemeinschaften auf der ganzen Welt teilt. Die urspr√ºngliche Siedlung dient als globales Hauptquartier f√ºr die 'Echodemokratie'-Bewegung. Seminare und Workshops werden abgehalten, um die ZeppBamboo-Technologie in anderen L√§ndern mit √§hnlichen Herausforderungen zu replizieren. Zeppeline transportieren jetzt nicht nur Waren und Menschen, sondern auch Lehrer, Ingenieure und Gemeinschaftsleiter, um das Wissen √ºber nachhaltiges Wohnen und demokratische Governance in der gesamten Welt zu verbreiten."
                            }
                        ];
                        setDoc(docRef, { phases: initialPhases }).catch(e => console.error("Error setting initial document:", e));
                    }
                }, (error) => {
                    console.error("Firestore onSnapshot error:", error);
                });
            } else {
                console.log("Not authenticated yet.");
            }
        });

        // Save function
        window.saveDocument = async () => {
            const userId = auth.currentUser?.uid || "anonymous";
            const docRef = doc(db, `artifacts/${appId}/public/data/zeppBamboo`);
            
            const phases = [];
            document.querySelectorAll('.phase-card').forEach((card, index) => {
                const title = card.querySelector('h2').textContent;
                const img = card.querySelector('img')?.src || card.querySelector('.image-placeholder')?.dataset.originalSrc;
                const alt = card.querySelector('img')?.alt || `Phase ${index + 1}`;
                const text = card.querySelector('p').textContent;
                phases.push({ id: index + 1, title, img, alt, text });
            });
            
            try {
                await setDoc(docRef, { phases, lastUpdatedBy: userId, lastUpdated: new Date() });
                showStatus('‚úÖ Erfolgreich gespeichert!', 'success');
            } catch (e) {
                console.error("Fehler beim Speichern des Dokuments: ", e);
                showStatus('‚ùå Fehler beim Speichern!', 'error');
            }
        };

        function showStatus(message, type) {
            const container = document.getElementById('save-status-container');
            container.innerHTML = `<div class="status-indicator status-${type}">${message}</div>`;
            setTimeout(() => container.innerHTML = '', 3000);
        }

        function createImageElement(phase) {
            const img = document.createElement('img');
            img.src = phase.img;
            img.alt = phase.alt;
            img.className = 'w-full h-auto object-cover rounded-lg mb-4 shadow-md';
            
            // Add error handling for images
            img.onerror = function() {
                // Replace with placeholder if image fails to load
                const placeholder = document.createElement('div');
                placeholder.className = 'image-placeholder';
                placeholder.textContent = `üì∏ Grafik f√ºr ${phase.title}`;
                placeholder.dataset.originalSrc = phase.img;
                this.parentNode.replaceChild(placeholder, this);
            };
            
            return img;
        }

        function renderPhases(phases) {
            const mainContent = document.getElementById('main-content');
            const loadingElement = document.getElementById('loading');
            
            if (loadingElement) {
                loadingElement.style.display = 'none';
            }
            
            mainContent.innerHTML = '';
            
            // Phase icons mapping
            const phaseIcons = ['icon-phase', 'icon-water', 'icon-bamboo', 'icon-energy', 'icon-phase', 'icon-eco', 'icon-community', 'icon-zepp', 'icon-governance', 'icon-network', 'icon-future'];
            
            phases.forEach((phase, index) => {
                const card = document.createElement('div');
                card.className = `card phase-card phase-${phase.id} p-6 animate-fade-in`;
                card.style.animationDelay = `${index * 0.1}s`;
                
                // Create phase number badge
                const phaseNumber = document.createElement('div');
                phaseNumber.className = 'phase-number';
                phaseNumber.textContent = phase.id;
                
                // Create image element with error handling
                const imageElement = createImageElement(phase);
                
                // Create content with icon
                const title = document.createElement('h2');
                title.className = 'text-2xl font-bold mb-4 text-gray-700';
                title.contentEditable = 'true';
                
                const iconSpan = document.createElement('span');
                iconSpan.className = `icon ${phaseIcons[phase.id - 1] || 'icon-phase'}`;
                
                title.appendChild(iconSpan);
                title.appendChild(document.createTextNode(phase.title));
                
                const text = document.createElement('p');
                text.className = 'text-gray-600';
                text.contentEditable = 'true';
                text.textContent = phase.text;
                
                // Assemble card
                card.appendChild(phaseNumber);
                card.appendChild(title);
                card.appendChild(imageElement);
                card.appendChild(text);
                
                mainContent.appendChild(card);
            });
        }
    </script>
</head>
<body>
    <header class="header py-12 px-4">
        <div class="header-content container">
            <div class="text-center">
                <h1 class="text-5xl md:text-6xl font-bold mb-2 tracking-tight">ZeppBamboo Bauphasen</h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto mb-6">Die Vision erreicht die DeepAuraHarmony Stage: Eine Reise der Nachhaltigkeit, Schritt f√ºr Schritt.</p>
                
                <!-- Project Statistics -->
                <div class="project-stats">
                    <div class="stat-card">
                        <div class="stat-number">10</div>
                        <div class="stat-label">Bauphasen</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">Nachhaltigkeit</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">‚ôªÔ∏è</div>
                        <div class="stat-label">Kreislaufwirtschaft</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">üå±</div>
                        <div class="stat-label">Biomasse Integration</div>
                    </div>
                </div>
                
                <div class="mt-4 text-gray-500 text-sm">
                    <p>Ihre Benutzer-ID: <span id="user-id" class="font-mono font-bold text-gray-700">Laden...</span></p>
                    <div class="mt-2" id="save-status-container"></div>
                </div>
                <button onclick="saveDocument()" class="btn btn-primary mt-6">
                    üíæ Speichern und Teilen
                </button>
            </div>
        </div>
    </header>

    <!-- Gallery Preview Section -->
    <section class="container">
        <div class="gallery-preview">
            <div class="gallery-content">
                <h2 class="text-3xl font-bold mb-4">Projekt Galerie</h2>
                <p class="text-lg">Erleben Sie die vollst√§ndige Vision des ZeppBamboo-Projekts</p>
            </div>
        </div>
    </section>

    <main class="container">
        <div id="main-content" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
            <div id="loading" class="loading col-span-full text-center text-lg">
                Lade Bauphasen...
            </div>
        </div>
    </main>

    <footer class="footer text-center py-8">
        <div class="container">
            <p class="text-gray-500">&copy; 2024 ZeppBamboo-Projekt. Alle Rechte vorbehalten.</p>
            <p class="text-gray-400 text-sm mt-2">Nachhaltige Siedlungen f√ºr eine bessere Zukunft</p>
        </div>
    </footer>

</body>
</html>
